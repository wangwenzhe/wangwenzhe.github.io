<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MyBatis-Plus | 王文哲的博客</title><meta name="author" content="王文哲"><meta name="copyright" content="王文哲"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习视频强烈推荐：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV17E411N7KN&#x2F;?spm_id_from&#x3D;333.788.videocard.0 入门：https:&#x2F;&#x2F;www.imooc.com&#x2F;learn&#x2F;1130 进阶：https:&#x2F;&#x2F;www.imooc.com&#x2F;learn&#x2F;1171 动态数据源参考文档：《dynamic-datasource-动态数据源.md》 简介">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis-Plus">
<meta property="og:url" content="https://wangwenzhe.github.io/posts/1276cc28.html">
<meta property="og:site_name" content="王文哲的博客">
<meta property="og:description" content="学习视频强烈推荐：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV17E411N7KN&#x2F;?spm_id_from&#x3D;333.788.videocard.0 入门：https:&#x2F;&#x2F;www.imooc.com&#x2F;learn&#x2F;1130 进阶：https:&#x2F;&#x2F;www.imooc.com&#x2F;learn&#x2F;1171 动态数据源参考文档：《dynamic-datasource-动态数据源.md》 简介">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wangwenzhe.github.io/about/logo.png">
<meta property="article:published_time" content="2020-04-29T09:35:16.000Z">
<meta property="article:modified_time" content="2025-06-15T13:17:21.742Z">
<meta property="article:author" content="王文哲">
<meta property="article:tag" content="MyBatis-Plus">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wangwenzhe.github.io/about/logo.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://wangwenzhe.github.io/posts/1276cc28.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MyBatis-Plus',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-06-15 21:17:21'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/about/logo.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">588</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">351</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">549</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('/img/top_img.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="王文哲的博客"><span class="site-name">王文哲的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MyBatis-Plus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-29T09:35:16.000Z" title="发表于 2020-04-29 17:35:16">2020-04-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-15T13:17:21.742Z" title="更新于 2025-06-15 21:17:21">2025-06-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ORM/">ORM</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ORM/MyBatis-Plus/">MyBatis-Plus</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MyBatis-Plus"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="学习视频"><a href="#学习视频" class="headerlink" title="学习视频"></a>学习视频</h2><p><strong>强烈推荐</strong>：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV17E411N7KN/?spm_id_from=333.788.videocard.0">https://www.bilibili.com/video/BV17E411N7KN/?spm_id_from=333.788.videocard.0</a></p>
<p>入门：<a target="_blank" rel="noopener" href="https://www.imooc.com/learn/1130">https://www.imooc.com/learn/1130</a></p>
<p>进阶：<a target="_blank" rel="noopener" href="https://www.imooc.com/learn/1171">https://www.imooc.com/learn/1171</a></p>
<p>动态数据源参考文档：《dynamic-datasource-动态数据源.md》</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/">MyBatis</a> 增强工具</p>
<p>注意：项目中引入 mybatis 或者 mybatis-plus，不能同时引入</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>官方：<a target="_blank" rel="noopener" href="https://baomidou.com/">MyBatis-Plus (baomidou.com)</a></p>
<p>示例：<a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus-samples">https://github.com/baomidou/mybatis-plus-samples</a></p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="多租户"><a href="#多租户" class="headerlink" title="多租户"></a>多租户</h3><p><a target="_blank" rel="noopener" href="https://baomidou.com/plugins/tenant/">https://baomidou.com/plugins/tenant/</a></p>
<h3 id="动态表名插件"><a href="#动态表名插件" class="headerlink" title="动态表名插件"></a>动态表名插件</h3><p><a target="_blank" rel="noopener" href="https://baomidou.com/plugins/dynamic-table-name/">https://baomidou.com/plugins/dynamic-table-name/</a></p>
<h2 id="springboot-application-yml-配置"><a href="#springboot-application-yml-配置" class="headerlink" title="springboot application.yml 配置"></a>springboot application.yml 配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mybatis plus 设置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:org/jeecg/modules/**/xml/*Mapper.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="comment"># 关闭MP3.0自带的banner</span></span><br><span class="line">    <span class="attr">banner:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#主键类型  0:&quot;数据库ID自增&quot;,1:&quot;该类型为未设置主键类型&quot;, 2:&quot;用户输入ID&quot;,3:&quot;全局唯一ID (数字类型唯一ID)&quot;, 4:&quot;全局唯一ID UUID&quot;,5:&quot;字符串全局唯一ID (idWorker 的字符串表示)&quot;;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">ASSIGN_ID</span></span><br><span class="line">      <span class="comment"># 默认数据库表下划线命名</span></span><br><span class="line">      <span class="attr">table-underline:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># 这个配置会将执行的sql打印出来，在开发或测试的时候可以用</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="comment"># 返回类型为Map,显示null对应的字段</span></span><br><span class="line">    <span class="attr">call-setters-on-nulls:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="sql-debug-日志输出"><a href="#sql-debug-日志输出" class="headerlink" title="sql debug 日志输出"></a>sql debug 日志输出</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">    <span class="attr">level:</span></span><br><span class="line">        <span class="attr">com.baomidou.mybatisplus:</span> <span class="string">DEBUG</span>  <span class="comment"># mybatis plus 日志输出</span></span><br></pre></td></tr></table></figure>

<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><h3 id="TableField"><a href="#TableField" class="headerlink" title="TableField"></a>TableField</h3><h4 id="模糊匹配"><a href="#模糊匹配" class="headerlink" title="模糊匹配"></a>模糊匹配</h4><p><a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java">https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字段模糊查询</span></span><br><span class="line"><span class="meta">@TableField(condition = SqlCondition.LIKE)</span></span><br><span class="line"><span class="meta">@TableField(condition = SqlCondition.LIKE_LEFT)</span></span><br><span class="line"><span class="meta">@TableField(condition = SqlCondition.LIKE_RIGHT)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;UnitInfo&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;(unitInfo); <span class="comment">// unitInfo 为参数对象</span></span><br></pre></td></tr></table></figure>

<h2 id="CRUD-接口"><a href="#CRUD-接口" class="headerlink" title="CRUD 接口"></a>CRUD 接口</h2><h3 id="Service-CRUD-接口"><a href="#Service-CRUD-接口" class="headerlink" title="Service CRUD 接口"></a>Service CRUD 接口</h3><h4 id="save"><a href="#save" class="headerlink" title="save"></a>save</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入一条记录（选择字段，策略插入）</span></span><br><span class="line"><span class="comment">// ID字段为空时，会根据ID策略赋值；不为空时，为自定义赋的值</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">save</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// 插入（批量）</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// 插入（批量），batchSize 批量大小</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="saveOrUpdate"><a href="#saveOrUpdate" class="headerlink" title="saveOrUpdate"></a>saveOrUpdate</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TableId 数据存在则更新记录，否插入一条记录。注意：必须有主键 ID，否则报错</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">//示例</span></span><br><span class="line">userService.saveOrUpdate(<span class="keyword">new</span> <span class="title class_">User</span>().setName(<span class="string">&quot;limei&quot;</span>).setAge(<span class="number">16</span>).setId(<span class="number">1429425704274059265L</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量修改插入</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// 批量修改插入</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 entity 条件，删除记录</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 ID 删除</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// 根据 columnMap 条件，删除记录</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// 删除（根据ID 批量删除）</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="update"><a href="#update" class="headerlink" title="update"></a>update</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 UpdateWrapper 条件，更新记录 需要设置sqlset</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 whereWrapper 条件，更新记录</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(T updateEntity, Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 ID 选择修改</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateById</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// 根据ID 批量更新</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// 根据ID 批量更新</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.lambdaUpdate().set(Event::getStatus, nodeStatus).set(Event::getActStatus, status).eq(Event::getId, event.getId()).update();</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.update(<span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;Event&gt;().set(Event::getProcInstId, procInstId).eq(Event::getId, event.getId()));</span><br></pre></td></tr></table></figure>

<h4 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 ID 查询</span></span><br><span class="line">T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper，查询一条记录</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper，查询一条记录</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper，查询一条记录</span></span><br><span class="line">&lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 查询列表</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 查询（根据ID 批量查询）</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// 查询（根据 columnMap 条件）</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// 查询所有列表</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 查询列表</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 查询全部记录</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 查询全部记录</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Page"><a href="#Page" class="headerlink" title="Page"></a>Page</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无条件分页查询</span></span><br><span class="line">IPage&lt;T&gt; <span class="title function_">page</span><span class="params">(IPage&lt;T&gt; page)</span>;</span><br><span class="line"><span class="comment">// 条件分页查询</span></span><br><span class="line">IPage&lt;T&gt; <span class="title function_">page</span><span class="params">(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 无条件分页查询</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">pageMaps</span><span class="params">(IPage&lt;T&gt; page)</span>;</span><br><span class="line"><span class="comment">// 条件分页查询</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">pageMaps</span><span class="params">(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Count"><a href="#Count" class="headerlink" title="Count"></a>Count</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询总记录数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="更新数据-lambdaUpdate"><a href="#更新数据-lambdaUpdate" class="headerlink" title="更新数据-lambdaUpdate"></a>更新数据-lambdaUpdate</h4><h4 id="根据多个条件更新实体"><a href="#根据多个条件更新实体" class="headerlink" title="根据多个条件更新实体"></a>根据多个条件更新实体</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.waterFacilityService.lambdaUpdate().eq(WaterFacility::getFacilityid, waterFacility.getFacilityid()).eq(WaterFacility::getFacilityname, facilityname_old).update(waterFacility);</span><br></pre></td></tr></table></figure>

<h4 id="根据-ID-更新指定字段"><a href="#根据-ID-更新指定字段" class="headerlink" title="根据 ID 更新指定字段"></a>根据 ID 更新指定字段</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.formeventService.lambdaUpdate().set(Formevent::getDocmenturl, pdfpath).eq(Formevent::getId, formevent.getId()).update();</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.formeventService.lambdaUpdate().set(SysUser::getOrgCode, <span class="literal">null</span>).eq(SysUser::getId, userId).update();</span><br></pre></td></tr></table></figure>

<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据 ID 删除</span></span><br><span class="line"><span class="built_in">this</span>.formfieldNodeService.removeById(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据 ID 集合批量删除</span></span><br><span class="line">List&lt;String&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;()&#123;&#123;</span><br><span class="line">  add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">&#125;&#125;;</span><br><span class="line"><span class="built_in">this</span>.formfieldNodeService.removeByIds(ids);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//根据非 ID 字段删除</span></span><br><span class="line"><span class="built_in">this</span>.formfieldNodeService.remove(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;FormfieldNode&gt;().eq(FormfieldNode::getFieldid, fieldid));</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据字段 Map 信息删除</span></span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;FIELDID&quot;</span>, fieldid);</span><br><span class="line"><span class="built_in">this</span>.formfieldNodeService.removeByMap(map);</span><br></pre></td></tr></table></figure>

<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><h5 id="根据-ID-查询"><a href="#根据-ID-查询" class="headerlink" title="根据 ID 查询"></a>根据 ID 查询</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getById(id)</span><br><span class="line"></span><br><span class="line">actBusinessService.list(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;ActBusiness&gt;().eq(ActBusiness::getProcDefId,id));</span><br></pre></td></tr></table></figure>

<h5 id="根据多个条件查询一个"><a href="#根据多个条件查询一个" class="headerlink" title="根据多个条件查询一个"></a>根据多个条件查询一个</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">WaterFacility</span> <span class="variable">byId</span> <span class="operator">=</span> waterFacilityService.lambdaQuery().eq(WaterFacility::getFacilityid, facilityid)</span><br><span class="line">                .eq(WaterFacility::getFacilityname, facilityname).one();</span><br><span class="line"></span><br><span class="line">actBusinessService.getOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;ActBusiness&gt;().eq(ActBusiness::getTableId,tableId).last(<span class="string">&quot;limit 1&quot;</span>));</span><br></pre></td></tr></table></figure>

<h5 id="获取一个"><a href="#获取一个" class="headerlink" title="获取一个"></a>获取一个</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">actBusinessService.getOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;ActBusiness&gt;().eq(ActBusiness::getTableId,tableId).last(<span class="string">&quot;limit 1&quot;</span>));</span><br></pre></td></tr></table></figure>

<h5 id="模糊查询匹配多个字段"><a href="#模糊查询匹配多个字段" class="headerlink" title="模糊查询匹配多个字段"></a>模糊查询匹配多个字段</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">userWrapper.and(</span><br><span class="line">	wrapper -&gt; </span><br><span class="line">		wrapper.like(<span class="string">&quot;name&quot;</span>, keywords).or().like(<span class="string">&quot;address&quot;</span>, keywords)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Mapper-CRUD-接口"><a href="#Mapper-CRUD-接口" class="headerlink" title="Mapper CRUD 接口"></a>Mapper CRUD 接口</h3><blockquote>
<p>说明:</p>
<ul>
<li>通用 CRUD 封装 <a target="_blank" rel="noopener" href="https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-core/src/main/java/com/baomidou/mybatisplus/core/mapper/BaseMapper.java">BaseMapper</a>接口，为 <code>Mybatis-Plus</code> 启动时自动解析实体表关系映射转换为 <code>Mybatis</code> 内部对象注入容器</li>
<li>泛型 <code>T</code> 为任意实体对象</li>
<li>参数 <code>Serializable</code> 为任意类型主键 <code>Mybatis-Plus</code> 不推荐使用复合主键约定每一张表都有自己的唯一 <code>id</code> 主键</li>
<li>对象 <code>Wrapper</code> 为 条件构造器</li>
</ul>
</blockquote>
<h5 id="增加"><a href="#增加" class="headerlink" title="增加"></a>增加</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(T entity)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//插入一条记录</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setName(<span class="string">&quot;小羊&quot;</span>);</span><br><span class="line">user.setAge(<span class="number">3</span>);</span><br><span class="line">user.setEmail(<span class="string">&quot;abc@mp.com&quot;</span>);</span><br><span class="line">userMapper.insert(user);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成功后从对象中获取 ID</span></span><br><span class="line">user.getId();</span><br></pre></td></tr></table></figure>

<h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 entity 条件，删除记录</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span>;  <span class="comment">//wrapper 实体对象封装操作类（可以为 null）</span></span><br><span class="line"><span class="comment">// 删除（根据ID 批量删除）</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// 根据 ID 删除</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// 根据 columnMap 条件，删除记录</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br></pre></td></tr></table></figure>

<h5 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h5><p>一、根据id更新</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setUserId(<span class="number">1</span>);</span><br><span class="line">user.setAge(<span class="number">29</span>);</span><br><span class="line"></span><br><span class="line">user.updateById();</span><br><span class="line">    or</span><br><span class="line"><span class="type">Integer</span> <span class="variable">rows</span> <span class="operator">=</span> userMapper.updateById(user);</span><br></pre></td></tr></table></figure>

<p>二、条件构造器作为参数进行更新</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">updateWrapper.eq(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;shimin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setAge(<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">rows</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br></pre></td></tr></table></figure>

<p>三、条件构造器Set方法</p>
<p>假设只更新一个字段在使用updateWrapper 的构造器中也需要构造一个实体对象,这样比较麻烦。可以使用updateWrapper的set方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">updateWrapper.eq(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;shimin&quot;</span>).set(<span class="string">&quot;age&quot;</span>, <span class="number">35</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">rows</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例</span></span><br><span class="line">sysUserRoleSpecialMapper.update(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;SysUserRoleSpecial&gt;().set(SysUserRoleSpecial::getUserId, userIdPortal).eq(SysUserRoleSpecial::getUserId, userId));</span><br></pre></td></tr></table></figure>

<p>lambda构造器</p>
<p>LambdaUpdateWrapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LambdaUpdateWrapper&lt;User&gt; lambdaUpdateWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">lambdaUpdateWrapper.eq(User::getRealName, <span class="string">&quot;shimin&quot;</span>).set(User::getAge, <span class="number">34</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">rows</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, lambdaUpdateWrapper);</span><br></pre></td></tr></table></figure>

<p>LambdaUpdateChainWrapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LambdaUpdateChainWrapper&lt;User&gt; lambdaUpdateChainWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateChainWrapper</span>&lt;&gt;(userMapper);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">update</span> <span class="operator">=</span> lambdaUpdateChainWrapper.eq(User::getRealName, <span class="string">&quot;shimin&quot;</span>).set(User::getAge, <span class="number">33</span>).update();</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//分步写</span></span><br><span class="line">        lambdaUpdateChainWrapper.eq(User::getRealName, <span class="string">&quot;shimin&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (user.getAge == <span class="number">33</span>) &#123;</span><br><span class="line">            lambdaUpdateChainWrapper.set(User::getAge, <span class="number">33</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    lambdaUpdateChainWrapper.update();</span><br></pre></td></tr></table></figure>

<h5 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 ID 查询</span></span><br><span class="line">T <span class="title function_">selectById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// 根据 entity 条件，查询一条记录。注意：要保证结果集最多只有一个，否则报错</span></span><br><span class="line">T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 查询（根据ID 批量查询）</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// 根据 entity 条件，查询全部记录</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 查询（根据 columnMap 条件）</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询全部记录。注意： 只返回第一个字段的值</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 entity 条件，查询全部记录（并翻页）</span></span><br><span class="line">IPage&lt;T&gt; <span class="title function_">selectPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分页示例</span></span><br><span class="line">Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">5</span>); <span class="comment">//第 1 页，每页 5 条</span></span><br><span class="line">page.addOrder(OrderItem.asc(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">Page&lt;User&gt; userIPage = mapper.selectPage(page, Wrappers.&lt;User&gt;lambdaQuery().eq(User::getAge, <span class="number">20</span>).like(User::getName, <span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">log.error(<span class="string">&quot;记录 -------------&gt; &#123;&#125;&quot;</span>, userIPage.getRecords());</span><br><span class="line">log.error(<span class="string">&quot;总条数 -------------&gt; &#123;&#125;&quot;</span>, userIPage.getTotal());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询全部记录（并翻页）</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMapsPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class="line">Integer <span class="title function_">selectCount</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h2><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/wrapper.html#abstractwrapper">https://mp.baomidou.com/guide/wrapper.html#abstractwrapper</a></p>
<ul>
<li>以下出现的第一个入参 <code>boolean condition</code> 表示该条件<strong>是否</strong>加入最后生成的 sql 中，例如：query.like (StringUtils.isNotBlank (name), Entity::getName, name) .eq (age!&#x3D;null &amp;&amp; age &gt;&#x3D; 0, Entity::getAge, age)</li>
<li>以下代码块内的多个方法均为从上往下补全个别 <code>boolean</code> 类型的入参，默认为 <code>true</code></li>
<li>以下出现的泛型 <code>Param</code> 均为 <code>Wrapper</code> 的子类实例 (均具有 <code>AbstractWrapper</code> 的所有方法)</li>
<li>以下方法在入参中出现的 <code>R</code> 为泛型，在普通 wrapper 中是 <code>String</code>, 在 LambdaWrapper 中是<strong>函数</strong> (例:<code>Entity::getId</code>,<code>Entity</code> 为实体类，<code>getId</code> 为字段 <code>id</code> 的 <strong>getMethod</strong>)</li>
<li>以下方法入参中的 <code>R column</code> 均表示数据库字段，当 <code>R</code> 具体类型为 <code>String</code> 时则为数据库字段名 (<strong>字段名是数据库关键字的自己用转义符包裹！</strong>)! 而不是实体类数据字段名！！！，另当 <code>R</code> 具体类型为 <code>SFunction</code> 时项目 runtime 不支持 eclipse 自家的编译器！！！</li>
<li>以下举例均为使用普通 wrapper, 入参为 <code>Map</code> 和 <code>List</code> 的均以 <code>json</code> 形式表现！</li>
<li>使用中如果入参的 <code>Map</code> 或者 <code>List</code> 为<strong>空</strong> , 则不会加入最后生成的 sql 中！！！</li>
</ul>
<h3 id="AbstractWrapper"><a href="#AbstractWrapper" class="headerlink" title="AbstractWrapper"></a>AbstractWrapper</h3><p>说明:</p>
<p>QueryWrapper (LambdaQueryWrapper) 和 UpdateWrapper (LambdaUpdateWrapper) 的父类<br>用于生成 sql 的 where 条件，entity 属性也用于生成 sql 的 where 条件<br>注意: entity 生成的 where 条件与 使用各个 api 生成的 where 条件<strong>没有任何关联行为</strong></p>
<h3 id="QueryWrapper"><a href="#QueryWrapper" class="headerlink" title="QueryWrapper"></a>QueryWrapper</h3><p>说明:</p>
<p>继承自 AbstractWrapper , 自身的内部属性 entity 也用于生成 where 条件<br>及 LambdaQueryWrapper, 可以通过 new QueryWrapper ().lambda () 方法获取</p>
<h4 id="last-无视优化规则直接拼接到-sql-的最后"><a href="#last-无视优化规则直接拼接到-sql-的最后" class="headerlink" title="last - 无视优化规则直接拼接到 sql 的最后"></a>last - 无视优化规则直接拼接到 sql 的最后</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.last(&quot;limit 0&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="select-设置查询返回字段"><a href="#select-设置查询返回字段" class="headerlink" title="select - 设置查询返回字段"></a>select - 设置查询返回字段</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select(String... sqlSelect)</span><br><span class="line">select(Predicate&lt;TableFieldInfo&gt; predicate)</span><br><span class="line">select(Class&lt;T&gt; entityClass, Predicate&lt;TableFieldInfo&gt; predicate)</span><br><span class="line">  </span><br><span class="line">例: select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>)  或  Wrappers.&lt;User&gt;lambdaQuery().select(User::getId)</span><br><span class="line">例: select(i -&gt; i.getProperty().startsWith(<span class="string">&quot;test&quot;</span>))</span><br></pre></td></tr></table></figure>

<h4 id="循环构建条件"><a href="#循环构建条件" class="headerlink" title="循环构建条件"></a>循环构建条件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">queryWrapper.and(wrapper -&gt; &#123;</span><br><span class="line">				<span class="keyword">for</span>(String manageOrgCode: manageOrgCodes)&#123;</span><br><span class="line">					wrapper.or().likeRight(sys_org_code_name, manageOrgCode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="UpdateWrapper"><a href="#UpdateWrapper" class="headerlink" title="UpdateWrapper"></a>UpdateWrapper</h3><p>说明:</p>
<p>继承自 <code>AbstractWrapper</code> , 自身的内部属性 <code>entity</code> 也用于生成 where 条件<br>及 <code>LambdaUpdateWrapper</code>, 可以通过 <code>new UpdateWrapper().lambda()</code> 方法获取！</p>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set(String column, Object val)</span><br><span class="line">set(<span class="type">boolean</span> condition, String column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>SQL SET 字段</li>
<li>例: <code>set(&quot;name&quot;, &quot;老李头&quot;)</code></li>
<li>例: <code>set(&quot;name&quot;, &quot;&quot;)</code>—&gt; 数据库字段值变为<strong>空字符串</strong></li>
<li>例: <code>set(&quot;name&quot;, null)</code>—&gt; 数据库字段值变为 <code>null</code></li>
</ul>
<h4 id="setSql"><a href="#setSql" class="headerlink" title="setSql"></a>setSql</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setSql(String sql)</span><br></pre></td></tr></table></figure>

<ul>
<li>设置 SET 部分 SQL</li>
<li>例: &#96;setSql(“name &#x3D; ‘老李头’”)</li>
</ul>
<h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda()"></a>lambda()</h3><ul>
<li>获取 <code>LambdaWrapper</code><br>在 <code>QueryWrapper</code> 中是获取 <code>LambdaQueryWrapper</code><br>在 <code>UpdateWrapper</code> 中是获取 &#96;LambdaUpdateWrapper</li>
</ul>
<h2 id="select-返回指定字段"><a href="#select-返回指定字段" class="headerlink" title="select 返回指定字段"></a>select 返回指定字段</h2><h3 id="返回指定字段"><a href="#返回指定字段" class="headerlink" title="返回指定字段"></a>返回指定字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">queryWrapper.select(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>).like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;雨&quot;</span>);</span><br><span class="line">List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">users.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h3 id="排除指定字段"><a href="#排除指定字段" class="headerlink" title="排除指定字段"></a>排除指定字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.select(User.class, info -&gt; !info.getColumn().equals(<span class="string">&quot;manager_id&quot;</span>)</span><br><span class="line">                &amp;&amp; !info.getColumn().equals(<span class="string">&quot;create_time&quot;</span>));</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">        users.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h3 id="动态指定字段"><a href="#动态指定字段" class="headerlink" title="动态指定字段"></a>动态指定字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;SysDepart&gt; query = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>();</span><br><span class="line"></span><br><span class="line">List&lt;SFunction&lt;SysDepart, Object&gt;&gt; columns = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">columns.add(SysDepart::getId);</span><br><span class="line">columns.add(SysDepart::getDepartName);</span><br><span class="line">columns.add(SysDepart::getParentId);</span><br><span class="line">columns.add(SysDepart::getOrgCode);</span><br><span class="line">columns.add(SysDepart::getDeptLevel);</span><br><span class="line">columns.add(SysDepart::getOrgType);</span><br><span class="line"><span class="keyword">if</span>(TableExtendFieldsConfig.tableFieldExist(<span class="string">&quot;sys_depart:departLogoType&quot;</span>)) &#123;</span><br><span class="line">  columns.add(SysDepart::getDepartLogoType);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">query.select(columns.toArray(<span class="keyword">new</span> <span class="title class_">SFunction</span>[]&#123;&#125;));</span><br><span class="line">list = <span class="built_in">this</span>.list(query);</span><br></pre></td></tr></table></figure>

<h2 id="UpdateWrapper-字段设置null"><a href="#UpdateWrapper-字段设置null" class="headerlink" title="UpdateWrapper 字段设置null"></a>UpdateWrapper 字段设置null</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LambdaUpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">wrapper.set(User::getGender(), <span class="literal">null</span>); <span class="comment">// 设置为null</span></span><br><span class="line">wrapper.eq(User::getId(), <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">userService.update(wrapper);</span><br></pre></td></tr></table></figure>

<h2 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h2><blockquote>
<p>拼接 sql 条件</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">queryWrapper.lambda().apply(<span class="string">&quot;date_format(dateColumn,&#x27;%Y-%m-%d&#x27;) = &#x27;2008-08-08&#x27;&quot;</span>)---&gt;date_format(dateColumn,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) = <span class="string">&#x27;2008-08-08&#x27;</span><span class="string">&quot;)  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">//SELECT name, belts FROM divisions WHERE FIND_IN_SET(&#x27;red&#x27;, belts);</span></span><br><span class="line"><span class="string">//更多请阅读：https://www.yiibai.com/mysql/find_in_set.html  </span></span><br><span class="line"><span class="string">queryWrapper.lambda().apply(&quot;</span>FIND_IN_SET(<span class="string">&#x27;&quot; + projectCode + &quot;&#x27;</span>,project_code)<span class="string">&quot;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queryWrapper.lambda().apply(sysUser.getOrgCode() + &quot;</span> like <span class="title function_">concat</span><span class="params">(sys_org_code, <span class="string">&#x27;%&#x27;</span>)</span><span class="string">&quot;);</span></span><br></pre></td></tr></table></figure>

<h2 id="last"><a href="#last" class="headerlink" title="last"></a>last</h2><ul>
<li><p>无视优化规则直接拼接到 sql 的最后</p>
<p><strong>注意事项</strong>: 只能调用一次,多次调用以最后一次为准 有sql注入的风险,请谨慎使用</p>
</li>
<li><p>例: <code>last(&quot;limit 1&quot;)</code></p>
</li>
</ul>
<h2 id="反向模糊查询"><a href="#反向模糊查询" class="headerlink" title="反向模糊查询"></a>反向模糊查询</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryWrapper.lambda().apply(orgCode + <span class="string">&quot; like concat(org_code, &#x27;%&#x27;)&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;AClass&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">wrapper.exists(&quot;SELECT 1 FROM B WHERE A.ID = B.AID&quot;);</span><br><span class="line">List&lt;AClass&gt; list = this.mapper.selectList(wrapper);</span><br></pre></td></tr></table></figure>

<h2 id="notExists"><a href="#notExists" class="headerlink" title="notExists"></a>notExists</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;AClass&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">wrapper.notExists(<span class="string">&quot;SELECT 1 FROM B WHERE A.ID = B.AID&quot;</span>);</span><br><span class="line">List&lt;AClass&gt; list = <span class="built_in">this</span>.mapper.selectList(wrapper);</span><br></pre></td></tr></table></figure>

<h2 id="inSql"><a href="#inSql" class="headerlink" title="inSql"></a>inSql</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryWrapper.lambda().inSql(SysPermission::getId, <span class="string">&quot;select permission_id  from sys_depart_permission where depart_id=&#x27;&quot;</span>+departId+<span class="string">&quot;&#x27;&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="notInSql"><a href="#notInSql" class="headerlink" title="notInSql"></a>notInSql</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">querySaWrapper.notInSql(SysAnnouncement::getId, <span class="string">&quot;select annt_id from sys_announcement_send where user_id=&#x27;&quot;</span>+userId+<span class="string">&quot;&#x27;&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">queryWrapper.lambda()</span><br><span class="line"> .orderByDesc(Event::getMajor)</span><br><span class="line">  .orderByDesc(Event::getEmergency)</span><br><span class="line">  .orderByDesc(Event::getStarttime);</span><br><span class="line"></span><br><span class="line"><span class="comment">// order by major desc, emergency desc, starttime desc</span></span><br></pre></td></tr></table></figure>

<h2 id="复杂的-and-or-语句"><a href="#复杂的-and-or-语句" class="headerlink" title="复杂的 and or 语句"></a>复杂的 and or 语句</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A and B</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).eq(<span class="string">&quot;b&quot;</span>,B);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A or B</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).or().eq(<span class="string">&quot;b&quot;</span>,B);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A or (B and C)</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).or(i -&gt; i.eq(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;B&quot;</span>).eq(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A or (B or C)</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).or(i -&gt; i.eq(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;B&quot;</span>).or().eq(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A and (B and C)</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).and(i -&gt; i.eq(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;B&quot;</span>).eq(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A and (B or C)</span></span><br><span class="line">.eq(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>).and(i -&gt; i.eq(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;B&quot;</span>).or().eq(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line"><span class="comment">// 示例</span></span><br><span class="line">queryWrapper.lambda().and(i -&gt; i.in(Event::getProcInstId, procInsIds)</span><br><span class="line">                            .or()</span><br><span class="line">                            .eq(Event::getCreateBy, sysUser.getUsername()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// xxx and (A or (B and C))</span></span><br><span class="line">queryWrapper.lambda().and(i -&gt; i.in(Event::getProcInstId, procInsIds)</span><br><span class="line">                    .or(j -&gt; j.eq(Event::getCreateBy, user.getUsername()).ne(Event::getSourcecode, ActConstant.SOURCECODE_FROM_SCM)));</span><br><span class="line">                    </span><br><span class="line"><span class="comment">// and 中循环 or</span></span><br><span class="line">LambdaQueryWrapper&lt;SysDepart&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;SysDepart&gt;();</span><br><span class="line">queryWrapper.and(wrapper -&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span>(String orgCode: orgCodes)&#123;</span><br><span class="line">    wrapper.or().likeRight(SysDepart::getOrgCode, orgCode);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);               </span><br></pre></td></tr></table></figure>

<h2 id="分页数据-手动组装"><a href="#分页数据-手动组装" class="headerlink" title="分页数据-手动组装"></a>分页数据-手动组装</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Page&lt;Crewinfo&gt; crewinfoPage = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;Crewinfo&gt;(pageNo, pageSize);</span><br><span class="line">List&lt;Crewinfo&gt; crewinfoList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">crewinfoPage.setTotal(userPage.getTotal());</span><br><span class="line">crewinfoPage.setRecords(crewinfoList);</span><br></pre></td></tr></table></figure>

<h2 id="空分页数据"><a href="#空分页数据" class="headerlink" title="空分页数据"></a>空分页数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Result&lt;IPage&lt;SysUser&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">Result</span>&lt;IPage&lt;SysUser&gt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有匹配的数据，返回为空</span></span><br><span class="line">result.setSuccess(<span class="literal">true</span>);</span><br><span class="line">result.setResult(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">return</span> Result.OK(<span class="literal">null</span>); <span class="comment">// 推荐-写法简单</span></span><br></pre></td></tr></table></figure>

<h2 id="批量插入"><a href="#批量插入" class="headerlink" title="批量插入"></a>批量插入</h2><h3 id="方案一、批量插入"><a href="#方案一、批量插入" class="headerlink" title="方案一、批量插入"></a>方案一、批量插入</h3><ol>
<li><p>数据库连接中增加 <code>&amp;rewriteBatchedStatements=true</code></p>
</li>
<li><p>service saveBatch</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">actZEventTaskTimeoutDealService.saveBatch(list, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="方案二、批量插入数据改造-insertBatchSomeColumn"><a href="#方案二、批量插入数据改造-insertBatchSomeColumn" class="headerlink" title="方案二、批量插入数据改造-insertBatchSomeColumn"></a>方案二、批量插入数据改造-insertBatchSomeColumn</h3><blockquote>
<p>mysql数据库 mp saveBatch 并不是真正的批量插入。改造如下</p>
</blockquote>
<ul>
<li><p>SpiceSqlInjector.java</p>
<blockquote>
<p>注入InsertBatchSomeColumn</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpiceSqlInjector</span> <span class="keyword">extends</span> <span class="title class_">DefaultSqlInjector</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;AbstractMethod&gt; <span class="title function_">getMethodList</span><span class="params">(Class&lt;?&gt; mapperClass)</span> &#123;</span><br><span class="line">        <span class="comment">// 注意：此SQL注入器继承了DefaultSqlInjector(默认注入器)，调用了DefaultSqlInjector的getMethodList方法，保留了mybatis-plus的自带方法</span></span><br><span class="line">        List&lt;AbstractMethod&gt; methodList = <span class="built_in">super</span>.getMethodList(mapperClass);</span><br><span class="line">        <span class="comment">// 注入InsertBatchSomeColumn</span></span><br><span class="line">        <span class="comment">// 在!t.isLogicDelete()表示不要逻辑删除字段，!&quot;update_time&quot;.equals(t.getColumn())表示不要字段名为 update_time 的字段</span></span><br><span class="line">        <span class="comment">// methodList.add(new InsertBatchSomeColumn(t -&gt; !t.isLogicDelete() &amp;&amp; !&quot;update_time&quot;.equals(t.getColumn())));</span></span><br><span class="line">        methodList.add(<span class="keyword">new</span> <span class="title class_">InsertBatchSomeColumn</span>());</span><br><span class="line">        <span class="keyword">return</span> methodList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>TempUsersProcInstIdMapper.java</p>
<blockquote>
<p>新增 insertBatchSomeColumn 批量插入方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TempUsersProcInstIdMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;TempUsersProcInstId&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量插入</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList 实体列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 影响行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">insertBatchSomeColumn</span><span class="params">(Collection&lt;TempUsersProcInstId&gt; entityList)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<blockquote>
<p>不需要再去写mapper.xml，直接调用这个方法就可以批量保存了</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tempUsersProcInstIdMapper.insertBatchSomeColumn(tempUsersProcInstIdList);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="循环-insert-数据，提示重复数据"><a href="#循环-insert-数据，提示重复数据" class="headerlink" title="循环 insert 数据，提示重复数据"></a>循环 insert 数据，提示重复数据</h2><p>解决：循环内先给 id 赋值为 null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; names = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;() &#123;&#123; add(<span class="string">&quot;123&quot;</span>);add(<span class="string">&quot;456&quot;</span>); &#125;&#125;;</span><br><span class="line"><span class="type">Event</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Event</span>();</span><br><span class="line"><span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">  event.setId(<span class="literal">null</span>); <span class="comment">// 必须，否则从第二次插入就开始报错</span></span><br><span class="line">  event.setIntro(name);</span><br><span class="line">  eventMapper.insert(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="逻辑删除字段"><a href="#逻辑删除字段" class="headerlink" title="逻辑删除字段"></a>逻辑删除字段</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic(value = &quot;0&quot;, delval = &quot;1&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<h2 id="Service-updateById-方法默认更新策略为-NOT-NULL"><a href="#Service-updateById-方法默认更新策略为-NOT-NULL" class="headerlink" title="Service updateById 方法默认更新策略为 NOT_NULL"></a>Service updateById 方法默认更新策略为 NOT_NULL</h2><p>mybatis-plus FieldStrategy 有三种策略：</p>
<ul>
<li>IGNORED：0 忽略</li>
<li>NOT_NULL：1 非 NULL，默认策略</li>
<li>NOT_EMPTY：2 非空</li>
</ul>
<p>而默认更新策略是NOT_NULL：非 NULL；即通过接口更新数据时数据为NULL值时将不更新进数据库</p>
<h2 id="SSM"><a href="#SSM" class="headerlink" title="SSM"></a>SSM</h2><p> <em>不再引入 MyBatis 以及 MyBatis-Spring</em></p>
<ol>
<li><p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>spring.xml</p>
<p><em>替换原来的配置</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapping/*.xml&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.bjtcrj.scm.*.persistence.dao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="XXXServiceImpl-添加了-DS-切换数据源，更新数据方式采用如下"><a href="#XXXServiceImpl-添加了-DS-切换数据源，更新数据方式采用如下" class="headerlink" title="XXXServiceImpl 添加了 @DS 切换数据源，更新数据方式采用如下"></a>XXXServiceImpl 添加了 @DS 切换数据源，更新数据方式采用如下</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.sysUserPortalService.update(<span class="keyword">new</span> <span class="title class_">SysUser</span>().setPassword(passwordEncode).setSalt(salt),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;SysUser&gt;().lambda().eq(SysUser::getUsername, sysUser.getUsername()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="built_in">this</span>.sysUserPortalService.update(<span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;SysUser&gt;()</span><br><span class="line">                            .eq(SysUser::getUsername, username)</span><br><span class="line">                            .set(SysUser::getPassword, user.getPassword())</span><br><span class="line">                            .set(SysUser::getSalt, user.getSalt()));</span><br></pre></td></tr></table></figure>

<p> 而不要采用如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.sysUserPortalService.lambdaUpdate()</span><br><span class="line">                    .set(SysUser::getPassword, passwordEncode).set(SysUser::getSalt, salt)</span><br><span class="line">                    .eq(SysUser::getId, id).update();</span><br></pre></td></tr></table></figure>

<h3 id="登录时sysUserService-getOne-queryWrapper-方法报错"><a href="#登录时sysUserService-getOne-queryWrapper-方法报错" class="headerlink" title="登录时sysUserService.getOne(queryWrapper)方法报错"></a>登录时sysUserService.getOne(queryWrapper)方法报错</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是由Mybatis-Plus:3.3.2包中的LambdaQueryWrapper导致，用QueryWrapper替换掉LambdaQueryWrapper后正常，后升级mybatis-plus至3.4.0版本，LambdaQueryWrapper问题得到解决，建议将Mybatis-Plus升级！！！</span><br></pre></td></tr></table></figure>

<h3 id="引入-mybatis-plus-后导致日期类型判断错误Cause-java-lang-IllegalArgumentException-invalid-comparison-java-util-Date-and-java-lang-String"><a href="#引入-mybatis-plus-后导致日期类型判断错误Cause-java-lang-IllegalArgumentException-invalid-comparison-java-util-Date-and-java-lang-String" class="headerlink" title="引入 mybatis-plus 后导致日期类型判断错误Cause: java.lang.IllegalArgumentException: invalid comparison: java.util.Date and java.lang.String"></a><strong>引入 mybatis-plus 后导致日期类型判断错误</strong>Cause: java.lang.IllegalArgumentException: invalid comparison: java.util.Date and java.lang.String</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;signin.signtime != null and signin.signtime != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">			    and  to_date(to_char(#&#123;signin.signtime&#125;,&#x27;yyyy-mm-dd&#x27;),&#x27;yyyy-mm-dd&#x27;)=to_date(to_char(s.signtime,&#x27;yyyy-mm-dd&#x27;),&#x27;yyyy-mm-dd&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>去掉 <code>!= &#39;&#39;</code> 判断</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;signin.signtime != null&quot;</span>&gt;</span></span><br><span class="line">			    and  to_date(to_char(#&#123;signin.signtime&#125;,&#x27;yyyy-mm-dd&#x27;),&#x27;yyyy-mm-dd&#x27;)=to_date(to_char(s.signtime,&#x27;yyyy-mm-dd&#x27;),&#x27;yyyy-mm-dd&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="非数据库字段"><a href="#非数据库字段" class="headerlink" title="非数据库字段"></a>非数据库字段</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableField(exist=false)</span><br><span class="line">private String other;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://wangwenzhe.github.io">王文哲</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://wangwenzhe.github.io/posts/1276cc28.html">https://wangwenzhe.github.io/posts/1276cc28.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wangwenzhe.github.io" target="_blank">王文哲的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MyBatis-Plus/">MyBatis-Plus</a></div><div class="post_share"><div class="social-share" data-image="/about/logo.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/549fee5.html" title="RTMP"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">RTMP</div></div></a></div><div class="next-post pull-right"><a href="/posts/d108c13a.html" title="RTSP"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">RTSP</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/about/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">王文哲</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">588</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">351</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">549</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">风雨无阻，灯火为你，星光虽微，照耀夜空。</div></div><div class="card-widget card-cheesy_pick-up_lines"><div class="card-content"><div class="item-headline"><i class="fas fa-heart" style="color:pink"></i><span>想对你说</span></div><div id="cheesy_pick-up_lines-container"></div></div></div><script data-pjax="data-pjax" src="/js/cheesy_pick-up_lines.js"></script><div class="js-pjax"><script>cheesy_pick_up_lines()</script></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91"><span class="toc-number">1.</span> <span class="toc-text">学习视频</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%A7%9F%E6%88%B7"><span class="toc-number">4.1.</span> <span class="toc-text">多租户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A1%A8%E5%90%8D%E6%8F%92%E4%BB%B6"><span class="toc-number">4.2.</span> <span class="toc-text">动态表名插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot-application-yml-%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">springboot application.yml 配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql-debug-%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA"><span class="toc-number">6.</span> <span class="toc-text">sql debug 日志输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.</span> <span class="toc-text">注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TableField"><span class="toc-number">7.1.</span> <span class="toc-text">TableField</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D"><span class="toc-number">7.1.1.</span> <span class="toc-text">模糊匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD-%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.</span> <span class="toc-text">CRUD 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-CRUD-%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.1.</span> <span class="toc-text">Service CRUD 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#save"><span class="toc-number">8.1.1.</span> <span class="toc-text">save</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#saveOrUpdate"><span class="toc-number">8.1.2.</span> <span class="toc-text">saveOrUpdate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remove"><span class="toc-number">8.1.3.</span> <span class="toc-text">remove</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#update"><span class="toc-number">8.1.4.</span> <span class="toc-text">update</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get"><span class="toc-number">8.1.5.</span> <span class="toc-text">Get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#List"><span class="toc-number">8.1.6.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Page"><span class="toc-number">8.1.7.</span> <span class="toc-text">Page</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Count"><span class="toc-number">8.1.8.</span> <span class="toc-text">Count</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">8.2.</span> <span class="toc-text">示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-lambdaUpdate"><span class="toc-number">8.2.1.</span> <span class="toc-text">更新数据-lambdaUpdate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0%E5%AE%9E%E4%BD%93"><span class="toc-number">8.2.2.</span> <span class="toc-text">根据多个条件更新实体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-ID-%E6%9B%B4%E6%96%B0%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">8.2.3.</span> <span class="toc-text">根据 ID 更新指定字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">8.2.4.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.5.</span> <span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-ID-%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.5.1.</span> <span class="toc-text">根据 ID 查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA"><span class="toc-number">8.2.5.2.</span> <span class="toc-text">根据多个条件查询一个</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA"><span class="toc-number">8.2.5.3.</span> <span class="toc-text">获取一个</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E5%8C%B9%E9%85%8D%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-number">8.2.5.4.</span> <span class="toc-text">模糊查询匹配多个字段</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper-CRUD-%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.3.</span> <span class="toc-text">Mapper CRUD 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0"><span class="toc-number">8.3.0.1.</span> <span class="toc-text">增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">8.3.0.2.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">8.3.0.3.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">8.3.0.4.</span> <span class="toc-text">查询</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">9.</span> <span class="toc-text">条件构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AbstractWrapper"><span class="toc-number">9.1.</span> <span class="toc-text">AbstractWrapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QueryWrapper"><span class="toc-number">9.2.</span> <span class="toc-text">QueryWrapper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#last-%E6%97%A0%E8%A7%86%E4%BC%98%E5%8C%96%E8%A7%84%E5%88%99%E7%9B%B4%E6%8E%A5%E6%8B%BC%E6%8E%A5%E5%88%B0-sql-%E7%9A%84%E6%9C%80%E5%90%8E"><span class="toc-number">9.2.1.</span> <span class="toc-text">last - 无视优化规则直接拼接到 sql 的最后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select-%E8%AE%BE%E7%BD%AE%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AD%97%E6%AE%B5"><span class="toc-number">9.2.2.</span> <span class="toc-text">select - 设置查询返回字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E6%9E%84%E5%BB%BA%E6%9D%A1%E4%BB%B6"><span class="toc-number">9.2.3.</span> <span class="toc-text">循环构建条件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UpdateWrapper"><span class="toc-number">9.3.</span> <span class="toc-text">UpdateWrapper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#set"><span class="toc-number">9.3.1.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setSql"><span class="toc-number">9.3.2.</span> <span class="toc-text">setSql</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda"><span class="toc-number">9.4.</span> <span class="toc-text">lambda()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select-%E8%BF%94%E5%9B%9E%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">10.</span> <span class="toc-text">select 返回指定字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">10.1.</span> <span class="toc-text">返回指定字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%99%A4%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">10.2.</span> <span class="toc-text">排除指定字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">10.3.</span> <span class="toc-text">动态指定字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UpdateWrapper-%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AEnull"><span class="toc-number">11.</span> <span class="toc-text">UpdateWrapper 字段设置null</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#apply"><span class="toc-number">12.</span> <span class="toc-text">apply</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#last"><span class="toc-number">13.</span> <span class="toc-text">last</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.</span> <span class="toc-text">反向模糊查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exists"><span class="toc-number">15.</span> <span class="toc-text">exists</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#notExists"><span class="toc-number">16.</span> <span class="toc-text">notExists</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inSql"><span class="toc-number">17.</span> <span class="toc-text">inSql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#notInSql"><span class="toc-number">18.</span> <span class="toc-text">notInSql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">19.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%9A%84-and-or-%E8%AF%AD%E5%8F%A5"><span class="toc-number">20.</span> <span class="toc-text">复杂的 and or 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE-%E6%89%8B%E5%8A%A8%E7%BB%84%E8%A3%85"><span class="toc-number">21.</span> <span class="toc-text">分页数据-手动组装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE"><span class="toc-number">22.</span> <span class="toc-text">空分页数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">23.</span> <span class="toc-text">批量插入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80%E3%80%81%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">23.1.</span> <span class="toc-text">方案一、批量插入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C%E3%80%81%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%94%B9%E9%80%A0-insertBatchSomeColumn"><span class="toc-number">23.2.</span> <span class="toc-text">方案二、批量插入数据改造-insertBatchSomeColumn</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF-insert-%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%8F%90%E7%A4%BA%E9%87%8D%E5%A4%8D%E6%95%B0%E6%8D%AE"><span class="toc-number">24.</span> <span class="toc-text">循环 insert 数据，提示重复数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-number">25.</span> <span class="toc-text">逻辑删除字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-updateById-%E6%96%B9%E6%B3%95%E9%BB%98%E8%AE%A4%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5%E4%B8%BA-NOT-NULL"><span class="toc-number">26.</span> <span class="toc-text">Service updateById 方法默认更新策略为 NOT_NULL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSM"><span class="toc-number">27.</span> <span class="toc-text">SSM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">28.</span> <span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XXXServiceImpl-%E6%B7%BB%E5%8A%A0%E4%BA%86-DS-%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%8C%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E6%96%B9%E5%BC%8F%E9%87%87%E7%94%A8%E5%A6%82%E4%B8%8B"><span class="toc-number">28.1.</span> <span class="toc-text">XXXServiceImpl 添加了 @DS 切换数据源，更新数据方式采用如下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%97%B6sysUserService-getOne-queryWrapper-%E6%96%B9%E6%B3%95%E6%8A%A5%E9%94%99"><span class="toc-number">28.2.</span> <span class="toc-text">登录时sysUserService.getOne(queryWrapper)方法报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-mybatis-plus-%E5%90%8E%E5%AF%BC%E8%87%B4%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E9%94%99%E8%AF%AFCause-java-lang-IllegalArgumentException-invalid-comparison-java-util-Date-and-java-lang-String"><span class="toc-number">28.3.</span> <span class="toc-text">引入 mybatis-plus 后导致日期类型判断错误Cause: java.lang.IllegalArgumentException: invalid comparison: java.util.Date and java.lang.String</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5"><span class="toc-number">28.4.</span> <span class="toc-text">非数据库字段</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ddd69226.html" title="Maven一文搞懂项目pom.xml配置文件setting.xml 配置项之间的关系">Maven一文搞懂项目pom.xml配置文件setting.xml 配置项之间的关系</a><time datetime="2025-06-15T14:19:06.000Z" title="发表于 2025-06-15 22:19:06">2025-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/7d3170cb.html" title="软件系统中通知公告和系统消息的区别">软件系统中通知公告和系统消息的区别</a><time datetime="2025-06-15T14:06:06.000Z" title="发表于 2025-06-15 22:06:06">2025-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/41a29295.html" title="SpringBoot下使用Redis，配置多个database数据源">SpringBoot下使用Redis，配置多个database数据源</a><time datetime="2025-06-15T14:05:49.000Z" title="发表于 2025-06-15 22:05:49">2025-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/c4ea753b.html" title="Redis-集群模式下，数据为什么都存储在database0中">Redis-集群模式下，数据为什么都存储在database0中</a><time datetime="2025-06-15T14:05:32.000Z" title="发表于 2025-06-15 22:05:32">2025-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/b2e22825.html" title="NLP">NLP</a><time datetime="2025-06-15T14:05:17.000Z" title="发表于 2025-06-15 22:05:17">2025-06-15</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By 王文哲</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><script src="/js/fishes.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start -->
      <div id="xf-MusicPlayer" data-cdnName="https://player.xfyun.club/js"  data-themeColor="xf-darkGreen"data-memory="1"></div>
<script src="https://player.xfyun.club/js/xf-MusicPlayer/js/xf-MusicPlayer.min.js"></script><!-- hexo injector body_end end --></body></html>